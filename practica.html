<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
       *{
        padding: 5px;
       }
    </style>
</head>
<body>
    
    <div>
        <h1>Registro de Persona</h1>
        <div>
            <form id="formularios" onsubmit="registrarEstudiante(event)">
                <label>Nombre: </label><input type="text" name="nombre" class="form-control"  placeholder="Ingrese el Nombre" >
                <br/>
                <label>Apellido: </label><input type="text" name="apellido" class="form-control"  placeholder="Ingrese el apellido" >
                <br>
                <button type="submit" class="btn btn-primary" id="botonEnviar">Enviar</button>
                <button type="reset"  class="btn btn-secondary">Limpiar</button>
            </form>

        </div>
        
        <h2>Listado de Estudiantes</h2>
    
        <table class="table"  id="listaEstudiante">
            <thead class="table-dark">
                <tr>
                    <th></th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                          <!-- Aqui va mi Arreglo lsitaEstudiante -->
            </tbody>
          </table>
          
    </div>
   

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        let listaEstudiante = [];
        function registrarEstudiante(objetoEvent){
            objetoEvent.preventDefault(); //Sirve para que la pagina no se te refresque
            const formularios = document.forms['formularios']
            const nombre = formularios['nombre'].value;
            const apellido = formularios['apellido'].value;

            const estudiante = {
                name : nombre,
                secondName : apellido
            }

            listaEstudiante.push(estudiante);
            console.log(listaEstudiante);
            mostrarListaEstudiante();
            objetoEvent.target.reset();
        }

        function mostrarListaEstudiante() {
            const formulario = document.getElementById('listaEstudiante').getElementsByTagName('tbody')[0];

            formulario.innerHTML="";
            for(let i=0; i < listaEstudiante.length; i++ ){
                const nuevaFila =formulario.insertRow();
                const estudiante = listaEstudiante[i];
                nuevaFila.innerHTML = ` <td><input type="radio" name="radiobutton" onclick="seleccionarEstudiante(this,${i})"></td>
                                        <td>${estudiante.name}</td>
                                        <td>${estudiante.secondName}</td>
                                        <th>
                                            <button onclick="eliminar(${i})"  class="btn btn-danger">Eliminar</button>
                                            <button onclick="actualizar(${i})"  class="btn btn-warning" disabled id="botonActualizar">Actualizar</button>
                                        </th>
                                     `;

                console.log(nuevaFila.innerHTML);
            }
        }

        function eliminar(index){

            const preguntaEliminar= confirm("¿Está Seguro qué desea eliminar este registro?");
            if(preguntaEliminar){
                listaEstudiante.splice(index,1);
                mostrarListaEstudiante();
                alert("El registro se elimino correctamente");
            }

           }


           function seleccionarEstudiante(objetoThis,index){
            const estudiante = listaEstudiante[index];
            

            const formularios = document.forms['formularios']
            formularios['nombre'].value = estudiante.name;
            formularios['apellido'].value= estudiante.secondName;

            const obtenerBotonEnviar = document.getElementById("botonEnviar");
            obtenerBotonEnviar.disabled=true;

            const botonActualizar = document.getElementById("botonActualizar");
            botonActualizar.disabled=false;
            

           }


           function actualizar(index){
            const formularios = document.forms['formularios']
            const nombre =formularios['nombre'].value;
            const apellido =formularios['apellido'].value;

            listaEstudiante[index].name=nombre;
            listaEstudiante[index].secondName=apellido;

            mostrarListaEstudiante();
            const obtenerBotonEnviar = document.getElementById("botonEnviar");
            obtenerBotonEnviar.disabled=false;

            objetoEvent.target.reset();
            
           }


    </script>

</body>
</html>